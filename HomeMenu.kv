#:import utils kivy.utils
#:import c colors
#:import f fonts
#:import pf pamFunctions
MainMenuLayout:

<PAMButton>:
    background_color:  utils.get_color_from_hex(self.h_color) if self.highlighted else utils.get_color_from_hex(self.d_color)
    font: f.getFont("normal")
    highlighted: False
    selected: False

<GameCarouselItem>:
    background_color:  utils.get_color_from_hex(self.h_color) if self.highlighted else utils.get_color_from_hex(self.d_color)
    

<PAMActionButton>:
    size_hint_x: None
    size_hint_y: None
    background_color: 0, 0, 0, 0
    canvas:
       # Color:
          #  rgba: 1, 0, 0, 0.4
        Rectangle:
            pos: (self.pos[0]+self.size[0]/2.0) - 40, (self.pos[1]+self.size[1]/2.0) - 40
            size: (self.parent.width*0.3, self.parent.height)
            source: self.d_action





<SideBar>:
    #size_hint_y: 0.5
    size_hint: None, None
    size: self.parent.width*0.23, self.parent.height*0.76
    pos_hint: {'x':0, 'top':1}
    on_pos: pos={self.parent.x, self.parent.y}


<SideBarTab>:
    #size_hint: 0.5, 0.2
    #text_size: root.width, None
    #pos: self.parent.pos
    pos_hint: {'x':0, 'top':0}
    on_pos: pos={self.parent.x, self.parent.y}
    size_hint: None, None
    size: self.parent.width, self.parent.height*0.12
    
<SideBarTabItem>:

<GameDescriptionArea>:
    orientation: 'vertical'
    size_hint: None, None
    size: self.parent.width*0.86, self.parent.height*0.38
    pos_hint: {'right': 1, 'top': 1}

<GameTitle>:
    text_size: self.size
    font_size: 24
    bold: True
    font: f.getFont("bold")
    halign: 'center'
    valign: 'top'
    size_hint: None, None
    size: self.parent.width*0.5, self.parent.height*0.13

<GameInfo>:
    size_hint: None, None
    size: self.parent.width, self.parent.height*0.20
    text_size: self.size
    font: f.getFont("normal")
    font_size: 20 
    halign: 'left'   
    valign: 'top'

<PAMVideo>:
    size_hint: None, None
    size: self.parent.width*0.86, self.parent.height*0.29
    pos_hint: {'right': 1, 'top': 1}

<ControlBar>:
    orientation: 'horizontal'
    spacing: 0
    size_hint: None, None
    size: self.parent.width, self.parent.height*0.08
    canvas:
        Color:
            rgb: utils.get_color_from_hex(c.getColor("primary"))
            
        Rectangle:
            pos: self.pos
            size: self.size 

<MainMenuLayout>:
    sidebar: sidebar
    games: games
    actionbtns: actionbtns
    
    BoxLayout:
        orientation: 'vertical'
        
        BoxLayout:
            orientation:'horizontal'
            size_hint: None, None
            size: self.parent.width, self.parent.height*0.84
            spacing: 20
            pos_hint: {'right': 1, 'top': 1}
            SideBar:
                id: sidebar
                active: True
                orientation: 'vertical'
                rightGroup: games
                spacing: 20
                on_parent: self.setLayout()
                SideBarTab:
                    id: sidebartab1
                    text: 'MULTIPLAYER'
                SideBarTab:
                    id: sidebartab2
                    text: 'SORT'
                SideBarTab:
                    id: sidebartab3
                    text: 'OPTIONS'
                SideBarTab:
                    id: sidebartab4
                    text: 'POWER'

            
            GameCarousel:
                id: games
                leftGroup: sidebar
                rightGroup: actionbtns
                orientation: 'vertical'
                size_hint: None, None
                size: self.parent.width*0.28, self.parent.height*0.72
                pos_hint: {'center_x': 0.5, 'top': 1}
                on_parent: self.setLayout()#pf.populateGameLibrary(games) <-- for testing. Can be removed.
  

            BoxLayout:
                orientation: 'vertical'
                size_hint: None, None
                size: self.parent.width*0.33, self.parent.height*0.84
                spacing: 30
                pos_hint: {'right': 1, 'top': 1}
                id: gameDetails
                PAMVideo:
                GameDescriptionArea:
                    GameTitle:
                        id: title
                        text: "Title"
                    GameInfo:
                        id: dev
                        text: "Developer:"
                    GameInfo:
                        id: pub
                        text: "Publisher:"
                    GameInfo:
                        id: year
                        text: "Year:"
                PAMButtonGroup:
                    size_hint: None, None
                    size: self.parent.width, self.parent.height*0.19
                    id: actionbtns
                    leftGroup: games
                    pos_hint: {'right': 1, 'top': 1}
                    orientation: 'horizontal'
                    on_parent: self.setLayout()
                    PAMActionButton:
                        id: play
                        background_normal: 'img/UI_PLAY_ICON.png'  # default image
                        d_action: 'img/UI_PLAY_ICON.png'
                        h_action: ''
                        s_action: ''
                        func_id: 'play'
                    PAMActionButton:
                        id: save
                        background_normal: 'img/UI_DATA_ICON.png' # default image
                        d_action: ''
                        h_action: ''
                        s_action: ''
                        func_id: 'save'
                    PAMActionButton:
                        background_normal: 'img/UI_FAVORITE_ICON.png' # default image
                        id: fav
                        d_action: ''
                        h_action: ''
                        s_action: ''
                        func_id: 'fav'

        ControlBar:
            Label:
                text:"Select"
            Label:
                text: "Back"
            Label:
                text: "Play"
            Label:
                text: "Favorite"